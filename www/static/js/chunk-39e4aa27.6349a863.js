(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39e4aa27"],{"0dc6":function(e,t,a){"use strict";(function(e){var n=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var r=n(a("1da1")),i=n(a("830c")),s={mixins:[i.default],data:function(){return{datas:[]}},methods:{doSubmit:function(){var t=this;this.callApi((0,r.default)(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:t.$api.user.createTester(e.pick(t.data,["count"]),{s:function(e){t.datas=e.data,t.sMsg(),t.$parent.doSearch()}});case 1:case"end":return a.stop()}},a,this)})))}},mounted:function(){var e=this;this.$bus.on("UserManageAddTester.show",function(){e.data={},e.datas=[],e.show=!0})}};t.default=s}).call(this,a("2ef0"))},"0f3c":function(e,t,a){"use strict";a.r(t);var n=a("30ac"),r=a("3348");for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);var s=a("2877"),o=Object(s["a"])(r["default"],n["a"],n["b"],!1,null,null,null);o.options.__file="AddTester.vue",t["default"]=o.exports},"27dd":function(e,t,a){"use strict";(function(e){var n=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var r=n(a("1da1")),i=n(a("830c")),s={mixins:[i.default],methods:{doSubmit:function(){var t=this;this.callApi((0,r.default)(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:t.$api.user.update(e.pick(t.data,["id","password","nick_name","role_id","expire_time"]),{s:t.updateSuccess});case 1:case"end":return a.stop()}},a,this)})))}},mounted:function(){var t=this;this.$bus.on("UserManageEdit.show",function(a){a.password="",t.data=e.cloneDeep(a),t.show=!0})}};t.default=s}).call(this,a("2ef0"))},"30ac":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{title:"新增帳號",width:"60%"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("Form",{attrs:{model:e.data,"label-width":80}},[a("Form-item",{attrs:{label:"組數"}},[a("Input",{model:{value:e.data.count,callback:function(t){e.$set(e.data,"count",t)},expression:"data.count"}})],1),e.datas.length?a("Form-item",{attrs:{label:"結果"}},[a("p",[e._v("資料請妥善保存")]),e._l(e.datas,function(t,n){return a("Card",{key:n},[e._v("\n          帳號："+e._s(t.userName)),a("br"),e._v("\n          密碼："+e._s(t.password)),a("br"),e._v("\n          過期時間："+e._s(t.expireTime)),a("br")])})],2):e._e()],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:e.doSubmit}},[e._v("確定")])],1)],1)},r=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r})},3201:function(e,t,a){"use strict";a.r(t);var n=a("fb95"),r=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);t["default"]=r.a},3348:function(e,t,a){"use strict";a.r(t);var n=a("0dc6"),r=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);t["default"]=r.a},"386d":function(e,t,a){"use strict";var n=a("cb7c"),r=a("83a1"),i=a("5f1b");a("214f")("search",1,function(e,t,a,s){return[function(a){var n=e(this),r=void 0==a?void 0:a[t];return void 0!==r?r.call(a,n):new RegExp(a)[t](String(n))},function(e){var t=s(a,e,this);if(t.done)return t.value;var o=n(e),u=String(this),c=o.lastIndex;r(c,0)||(o.lastIndex=0);var d=i(o,u);return r(o.lastIndex,c)||(o.lastIndex=c),null===d?-1:d.index}]})},5149:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("Button",{attrs:{type:"info"},on:{click:function(t){e.$bus.emit("UserManageAdd.show")}}},[e._v("新增")]),a("Button",{attrs:{type:"info"},on:{click:function(t){e.$bus.emit("UserManageAddTester.show")}}},[e._v("新增測試帳號")]),a("Select",{staticStyle:{width:"200px"},model:{value:e.search.role_id,callback:function(t){e.$set(e.search,"role_id",t)},expression:"search.role_id"}},e._l(e.option.RoleConstant.option(),function(t,n){return a("Option",{key:n,attrs:{value:t.id}},[e._v("\n        "+e._s(t.name)+"\n      ")])}),1),a("Button",{attrs:{type:"success"},on:{click:function(t){e.doSearch()}}},[e._v("送出")]),a("br"),a("br"),a("table",{staticClass:"table table-striped"},[e._m(0),a("tbody",e._l(e.datas,function(t,n){return a("tr",{key:n},[a("td",[e._v(e._s(t.user_name))]),a("td",[e._v(e._s(t.nick_name))]),a("td",[e._v(e._s(t.role.name))]),a("td",[e._v(e._s(t.expire_time?t.expire_time:"無"))]),a("td",[e.canEdit(t)?a("Button",{attrs:{type:"warning"},on:{click:function(a){e.$bus.emit("UserManageEdit.show",t)}}},[e._v("編輯\n          ")]):e._e(),e.canDelete(t)?a("Button",{attrs:{type:"error"},on:{click:function(a){e.deleteConfirm(t)}}},[e._v("刪除\n          ")]):e._e()],1)])}))]),a("paginate",{attrs:{paginate:e.paginate}}),a("Add"),a("Edit"),a("AddTester")],1)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("帳號")]),a("th",[e._v("暱稱")]),a("th",[e._v("角色")]),a("th",[e._v("過期時間")]),a("th",{staticClass:"action-field"},[e._v("操作")])])])}];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r})},"55c3":function(e,t,a){"use strict";(function(e){var n=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("386d");var r=n(a("8022")),i={mixins:[r.default],methods:{reqSuccess:function(){this.sMsg(),this.doSearch()},reqFail:function(){this.fMsg()},getReqBody:function(t){return e.assign(t,this.search,this.paginate)}}};t.default=i}).call(this,a("2ef0"))},"5e21":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{title:"新增",width:"60%"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("Form",{attrs:{model:e.data,"label-width":80}},[a("Form-item",{attrs:{label:"帳號*"}},[a("Input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"user_name"},model:{value:e.data.user_name,callback:function(t){e.$set(e.data,"user_name",t)},expression:"data.user_name"}}),a("span",{staticClass:"text-danger"},[e._v(e._s(e.errorBags.first("user_name")))])],1),a("Form-item",{attrs:{label:"密碼*"}},[a("Input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6",expression:"'required|min:6'"}],attrs:{type:"password",name:"password"},model:{value:e.data.password,callback:function(t){e.$set(e.data,"password",t)},expression:"data.password"}}),a("span",{staticClass:"text-danger"},[e._v(e._s(e.errorBags.first("password")))])],1),a("Form-item",{attrs:{label:"暱稱"}},[a("Input",{directives:[{name:"validate",rawName:"v-validate",value:"max:20",expression:"'max:20'"}],attrs:{name:"nick_name"},model:{value:e.data.nick_name,callback:function(t){e.$set(e.data,"nick_name",t)},expression:"data.nick_name"}}),a("span",{staticClass:"text-danger"},[e._v(e._s(e.errorBags.first("nick_name")))])],1),a("Form-item",{attrs:{label:"角色"}},[a("Select",{attrs:{placeholder:"空白則為測試帳號"},model:{value:e.data.role_id,callback:function(t){e.$set(e.data,"role_id",t)},expression:"data.role_id"}},e._l(e.$parent.option.RoleConstant.option(),function(t,n){return a("Option",{key:n,attrs:{value:t.id}},[e._v("\n            "+e._s(t.name)+"\n          ")])}),1)],1),a("Form-item",{attrs:{label:"過期日"}},[a("Date-picker",{attrs:{type:"datetime",placeholder:"永久請空白"},model:{value:e.data.expire_time,callback:function(t){e.$set(e.data,"expire_time",t)},expression:"data.expire_time"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",disabled:!!e.errorBags.all().length},on:{click:e.doSubmit}},[e._v("確定\n      ")])],1)],1)},r=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r})},6840:function(e,t,a){"use strict";a.r(t);var n=a("27dd"),r=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);t["default"]=r.a},7163:function(e,t,a){"use strict";a.r(t);var n=a("5e21"),r=a("ea81");for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);var s=a("2877"),o=Object(s["a"])(r["default"],n["a"],n["b"],!1,null,null,null);o.options.__file="Add.vue",t["default"]=o.exports},"769c":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{title:"編輯",width:"60%"},on:{"on-ok":e.doSubmit},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("Form",{attrs:{model:e.data,"label-width":80}},[a("Form-item",{attrs:{label:"帳號"}},[e._v("\n        "+e._s(e.data.user_name)+"\n      ")]),a("Form-item",{attrs:{label:"密碼"}},[a("Input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6",expression:"'required|min:6'"}],attrs:{type:"password",name:"password",placeholder:"不異動請空白"},model:{value:e.data.password,callback:function(t){e.$set(e.data,"password",t)},expression:"data.password"}}),a("span",{staticClass:"text-danger"},[e._v(e._s(e.errorBags.first("password")))])],1),a("Form-item",{attrs:{label:"暱稱"}},[a("Input",{directives:[{name:"validate",rawName:"v-validate",value:"max:20",expression:"'max:20'"}],attrs:{name:"nick_name"},model:{value:e.data.nick_name,callback:function(t){e.$set(e.data,"nick_name",t)},expression:"data.nick_name"}}),a("span",{staticClass:"text-danger"},[e._v(e._s(e.errorBags.first("nick_name")))])],1),a("Form-item",{attrs:{label:"角色"}},[a("Select",{attrs:{placeholder:"空白則為測試帳號"},model:{value:e.data.role_id,callback:function(t){e.$set(e.data,"role_id",t)},expression:"data.role_id"}},e._l(e.$parent.option.RoleConstant.option(),function(t,n){return a("Option",{key:n,attrs:{value:t.id}},[e._v("\n            "+e._s(t.name)+"\n          ")])}),1)],1),a("Form-item",{attrs:{label:"過期日"}},[a("Date-picker",{attrs:{type:"datetime",placeholder:"永久請空白"},model:{value:e.data.expire_time,callback:function(t){e.$set(e.data,"expire_time",t)},expression:"data.expire_time"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:e.doSubmit}},[e._v("確定")])],1)],1)},r=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r})},8022:function(e,t,a){"use strict";(function(e){var n=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var r=n(a("1da1")),i=n(a("efa8")),s={mixins:[i.default],methods:{callApi:function(){var e=(0,r.default)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$loading(),e.prev=1,e.next=4,t();case 4:e.next=10;break;case 6:throw e.prev=6,e.t0=e["catch"](1),this.$loading.close(),e.t0;case 10:this.$loading.close();case 11:case"end":return e.stop()}},e,this,[[1,6]])}));function t(t){return e.apply(this,arguments)}return t}(),sMsg:function(){this.$Message.success("success")},fMsg:function(){this.$Message.error("error")},doSearch:function(){var t=this;this.callApi((0,r.default)(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.all([t.getDatas(),t.getTotal()]);case 2:case"end":return a.stop()}},a,this)})))},doRefresh:function(){var e=this;this.callApi((0,r.default)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getDatas();case 2:case"end":return t.stop()}},t,this)})))},doPageChange:function(e,t){this.paginate.page=e,this.callApi(t)}}};t.default=s}).call(this,a("bc3a"))},"830c":function(e,t,a){"use strict";var n=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("cadf"),a("551c"),a("097d");var r=n(a("8022")),i={mixins:[r.default],data:function(){return{show:!1,data:{}}},methods:{createSuccess:function(){this.reqSuccess(),this.$parent.doSearch()},updateSuccess:function(){this.reqSuccess(),this.$parent.doRefresh()},reqSuccess:function(){this.sMsg(),this.show=!1},reqFail:function(){this.fMsg()}}};t.default=i},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"9f35":function(e,t,a){"use strict";var n=a("4ea4"),r=n(a("d4ec")),i=n(a("bee2")),s=function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,null,[{key:"enum",value:function(){return[this.ANTHOR,this.ROOT]}},{key:"ANTHOR",get:function(){return"lu7766"}},{key:"ROOT",get:function(){return"root"}}]),e}();e.exports=s},b6ef:function(e,t,a){"use strict";a.r(t);var n=a("769c"),r=a("6840");for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);var s=a("2877"),o=Object(s["a"])(r["default"],n["a"],n["b"],!1,null,null,null);o.options.__file="Edit.vue",t["default"]=o.exports},cf44:function(e,t,a){"use strict";a.r(t);var n=a("5149"),r=a("3201");for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);var s=a("2877"),o=Object(s["a"])(r["default"],n["a"],n["b"],!1,null,null,null);o.options.__file="index.vue",t["default"]=o.exports},d4bd:function(e,t,a){"use strict";(function(e){var n=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var r=n(a("1da1")),i=n(a("830c")),s={mixins:[i.default],methods:{doSubmit:function(){var t=this;this.callApi((0,r.default)(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:t.$api.user.create(e.pick(t.data,["user_name","password","nick_name","role_id","expire_time"]),{s:t.createSuccess});case 1:case"end":return a.stop()}},a,this)})))}},mounted:function(){var e=this;this.$validator.validateAll(),this.$bus.on("UserManageAdd.show",function(){e.data={},e.show=!0})}};t.default=s}).call(this,a("2ef0"))},ea81:function(e,t,a){"use strict";a.r(t);var n=a("d4bd"),r=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);t["default"]=r.a},efa8:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={components:{Paginate:function(){return a.e("chunk-26a3c25f").then(a.bind(null,"0238"))}},data:function(){return{paginate:{total:0,page:1,perPage:20}}},computed:{lastPage:function(){return Math.ceil(this.paginate.total/this.paginate.perPage)}}};t.default=n},fb95:function(e,t,a){"use strict";var n=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var r=n(a("1da1")),i=n(a("55c3")),s=n(a("d591")),o=n(a("9f35")),u=n(a("521c")),c={mixins:[i.default],components:{Add:a("7163").default,Edit:a("b6ef").default,AddTester:a("0f3c").default},data:function(){return{search:{role_id:u.default.option()[0].id},option:{RoleConstant:u.default},datas:[]}},methods:{getDatas:function(){var e=(0,r.default)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.user.getList(this.getReqBody());case 2:t=e.sent,this.datas=t.data;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getTotal:function(){var e=(0,r.default)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.user.getListTotal(this.getReqBody());case 2:t=e.sent,this.paginate.total=t.data.total;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),canEdit:function(e){var t=new s.default(e);return!(o.default.enum().indexOf(t.userName)>-1)||(User.userName===o.default.ROOT&&t.userName===o.default.ROOT||User.userName===o.default.ANTHOR)},canDelete:function(e){var t=new s.default(e);return-1===o.default.enum().indexOf(t.userName)},deleteConfirm:function(e){var t=this;this.$Modal.confirm({title:"警告",content:"刪除後無法恢復，確定是否刪除",onOk:function(){var a=(0,r.default)(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$api.user.delete({id:e.id});case 2:t.sMsg(),t.doSearch();case 4:case"end":return a.stop()}},a,this)}));function n(){return a.apply(this,arguments)}return n}()})}}};t.default=c}}]);
//# sourceMappingURL=chunk-39e4aa27.6349a863.js.map